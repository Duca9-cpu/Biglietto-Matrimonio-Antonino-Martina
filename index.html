<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">                <div class="col-md-10">
                    <div class="family-section p-3 mb-3">
                        <h4 class="family-title mb-3">Dettagli Famiglia</h4>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select class="form-select" id="tipoPartecipazione" name="tipoPartecipazione" required>
                                        <option value="">Scegli...</option>
                                        <option value="singolo">Partecipo da solo</option>
                                        <option value="famiglia">Partecipo con la famiglia</option>
                                    </select>
                                    <label for="tipoPartecipazione">Tipo di partecipazione</label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <input type="number" class="form-control" id="numeroPersione" name="numeroPersone" min="1" max="10" value="1">
                                    <label for="numeroPersione">Numero totale persone</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="form-floating">
                        <textarea class="form-control" id="dettagliFamily" name="dettagliFamily" placeholder="Dettagli famiglia" style="height: 100px"></textarea>
                        <label for="dettagliFamily">Nomi e età dei componenti della famiglia</label>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="form-floating">
                        <textarea class="form-control" id="note" name="note" placeholder="Note" style="height: 100px"></textarea>
                        <label for="note">Note (allergie, intolleranze o altre informazioni)</label>
                    </div>
                </div>    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Invito al matrimonio di Antonino e Martina - 27 Giugno 2026">
    <meta name="keywords" content="matrimonio, wedding, Antonino, Martina, Caltagirone">
    <meta property="og:title" content="Matrimonio Antonino & Martina">
    <meta property="og:description" content="Invito al matrimonio di Antonino e Martina - 27 Giugno 2026">
    <title>Matrimonio Antonino & Martina</title>
    
    <!-- Bootstrap CSS locale -->
    <link href="bootstrap.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- CSS personalizzato -->
    <link href="style.css" rel="stylesheet">
</head>
<body>

    <div class="container text-center py-5">
         <img src="images/481073879_2088949674899599_7389138159625559070_n.jpg" 
         alt="Antonino & Martina" 
         class="img-fluid mb-4" 
         style="max-height: 250px; border-radius: 15px;">
        <h1 class="mb-3">Matrimonio di Antonino & Martina</h1>
        <p class="lead">27 Giugno 2026 - ore 16:00</p>
        <p>Chiesa di Santa Maria di Gesù, Caltagirone</p>
        
        <!-- Mappa ottimizzata -->
        <div class="ratio ratio-16x9 mb-4">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3160.850348149558!2d14.516026!3d37.223723!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x13110fb4d02ac387%3A0xa1b9a2f3ec5eb90b!2sChiesa%20Parrocchiale%20di%20Santa%20Maria%20di%20Ges%C3%B9%20dei%20Frati%20Minori!5e0!3m2!1sit!2sit!4v1696212345678!5m2!1sit!2sit" 
                width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy">
            </iframe>
        </div>
        
        <!-- RSVP form -->
        <div class="rsvp-section mt-5 mb-4">
            <h3 class="rsvp-title">✧ Conferma la tua presenza ✧</h3>
            <p class="rsvp-subtitle">Ci aiuterai a organizzare al meglio questo giorno speciale</p>
            
            <form id="rsvpForm" class="row g-3 justify-content-center">
                <div class="col-md-5">
                    <div class="form-floating">
                        <input type="text" class="form-control" id="nome" name="nome" placeholder="Il tuo nome" required>
                        <label for="nome">Il tuo nome</label>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="form-floating">
                        <select class="form-select" id="presenza" name="presenza" required>
                            <option value="">Scegli...</option>
                            <option value="si">Con gioia parteciperò</option>
                            <option value="no">Mi dispiace, non potrò esserci</option>
                        </select>
                        <label for="presenza">Parteciperai?</label>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="form-floating">
                        <input type="number" class="form-control" id="accompagnatori" name="accompagnatori" min="0" max="5" value="0">
                        <label for="accompagnatori">Numero di persone</label>
                    </div>
                </div>
                <div class="col-md-10">
                    <div class="form-floating">
                        <textarea class="form-control" id="note" name="note" placeholder="Note" style="height: 100px"></textarea>
                        <label for="note">Note (allergie, intolleranze o altre informazioni)</label>
                    </div>
                </div>
                <div class="col-12 mt-4">
                    <button type="submit" class="btn btn-rsvp">
                        <span>Invia conferma</span>
                        <i class="fas fa-heart ms-2"></i>
                    </button>
                </div>
            </form>

            <div id="msg" class="mt-4"></div>
        </div>
    </div>

    <div class="qr-section mt-5">
        <p class="qr-title">✧ Condividi l'invito ✧</p>
        <div id="qrcode"></div>
        <p class="qr-description">Inquadra il codice QR per visualizzare<br>l'invito sul tuo dispositivo</p>
    </div>

    <!-- QR Code library -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <!-- Bootstrap JS locale -->
    <script src="bootstrap.bundle.js"></script>

    <script>
        // Gestione visibilità campi famiglia
        const tipoPartecipazione = document.getElementById('tipoPartecipazione');
        const dettagliFamilyContainer = document.getElementById('dettagliFamily').closest('.col-md-10');
        
        // Nascondi inizialmente il campo dettagli famiglia
        dettagliFamilyContainer.style.display = 'none';
        
        tipoPartecipazione.addEventListener('change', function() {
            if (this.value === 'famiglia') {
                dettagliFamilyContainer.style.display = 'block';
            } else {
                dettagliFamilyContainer.style.display = 'none';
                document.getElementById('dettagliFamily').value = '';
            }
        });

        // Generazione QR Code
        const qrcode = new QRCode("qrcode", {
            text: "https://duca9-cpu.github.io/Biglietto-Matrimonio-Antonino-Martina/",
            width: 200,
            height: 200,
            colorDark: "#c76b4c",
            colorLight: "#ffffff",
            correctLevel: QRCode.CorrectLevel.H
        });

        const form = document.getElementById('rsvpForm');
        const msg = document.getElementById('msg');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>Invio in corso...</span>';

            const data = {
                nome: form.nome.value,
                presenza: form.presenza.value,
                tipoPartecipazione: form.tipoPartecipazione.value,
                numeroPersone: form.numeroPersone.value,
                dettagliFamily: form.dettagliFamily.value,
                note: form.note.value,
                dataInvio: new Date().toISOString()
            };

            // Sostituisci questo URL con il tuo endpoint Google Apps Script quando sarà pronto
            fetch("https://script.google.com/macros/s/YOUR-SCRIPT-ID/exec", {
                method: "POST",
                body: JSON.stringify(data),
                headers: {
                    "Content-Type": "application/json"
                }
            })
            .then(res => res.text())
            .then(() => {
                msg.innerHTML = `
                    <div class='alert alert-success fade show'>
                        <h4>Grazie ${data.nome}!</h4>
                        <p>La tua risposta è stata registrata con successo.</p>
                        ${data.presenza === 'si' ? 
                            `<p>Non vediamo l'ora di festeggiare insieme!</p>` : 
                            `<p>Ci dispiace che non potrai essere presente.</p>`
                        }
                    </div>`;
                form.reset();
            })
            .catch(() => {
                msg.innerHTML = `
                    <div class='alert alert-danger fade show'>
                        <h4>Oops!</h4>
                        <p>Si è verificato un errore durante l'invio.</p>
                        <p>Per favore, riprova tra qualche momento.</p>
                    </div>`;
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<span>Invia conferma</span><i class="fas fa-heart ms-2"></i>';
                
                // Scroll to message
                msg.scrollIntoView({ behavior: 'smooth', block: 'center' });
            });
        });
    </script>

</body>
</html>
